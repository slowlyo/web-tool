"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3603],{53603:function(ue,I,j){j.r(I),j.d(I,{getJavaScriptWorker:function(){return oe},getTypeScriptWorker:function(){return ae},setupJavaScript:function(){return se},setupTypeScript:function(){return ie}});var f=j(77579),H=function(t,r,e,n){function o(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function c(u){try{s(n.next(u))}catch(d){a(d)}}function l(u){try{s(n.throw(u))}catch(d){a(d)}}function s(u){u.done?i(u.value):o(u.value).then(c,l)}s((n=n.apply(t,r||[])).next())})},W=function(t,r){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(u){return l([s,u])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,o=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){e=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){e.label=s[1];break}if(s[0]===6&&e.label<i[1]){e.label=i[1],i=s;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(s);break}i[2]&&e.ops.pop(),e.trys.pop();continue}s=r.call(t,e)}catch(u){s=[6,u],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},V=function(){function t(r,e){var n=this;this._modeId=r,this._defaults=e,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange(function(){return n._stopWorker()}),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange(function(){return n._updateExtraLibs()})}return t.prototype._stopWorker=function(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null},t.prototype.dispose=function(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()},t.prototype._updateExtraLibs=function(){return H(this,void 0,void 0,function(){var r,e;return W(this,function(n){switch(n.label){case 0:return this._worker?(r=++this._updateExtraLibsToken,[4,this._worker.getProxy()]):[2];case 1:return e=n.sent(),this._updateExtraLibsToken!==r?[2]:(e.updateExtraLibs(this._defaults.getExtraLibs()),[2])}})})},t.prototype._getClient=function(){var r=this;if(!this._client){this._worker=f.j6.createWebWorker({moduleId:"vs/language/typescript/tsWorker",label:this._modeId,keepIdleModels:!0,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs(),customWorkerPath:this._defaults.workerOptions.customWorkerPath,inlayHintsOptions:this._defaults.inlayHintsOptions}});var e=this._worker.getProxy();this._defaults.getEagerModelSync()&&(e=e.then(function(n){return r._worker?r._worker.withSyncedResources(f.j6.getModels().filter(function(o){return o.getLanguageId()===r._modeId}).map(function(o){return o.uri})):n})),this._client=e}return this._client},t.prototype.getLanguageServiceWorker=function(){for(var r=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o;return this._getClient().then(function(i){o=i}).then(function(i){if(r._worker)return r._worker.withSyncedResources(e)}).then(function(i){return o})},t}(),B=j(52925),g={};g["lib.d.ts"]=!0,g["lib.dom.d.ts"]=!0,g["lib.dom.iterable.d.ts"]=!0,g["lib.es2015.collection.d.ts"]=!0,g["lib.es2015.core.d.ts"]=!0,g["lib.es2015.d.ts"]=!0,g["lib.es2015.generator.d.ts"]=!0,g["lib.es2015.iterable.d.ts"]=!0,g["lib.es2015.promise.d.ts"]=!0,g["lib.es2015.proxy.d.ts"]=!0,g["lib.es2015.reflect.d.ts"]=!0,g["lib.es2015.symbol.d.ts"]=!0,g["lib.es2015.symbol.wellknown.d.ts"]=!0,g["lib.es2016.array.include.d.ts"]=!0,g["lib.es2016.d.ts"]=!0,g["lib.es2016.full.d.ts"]=!0,g["lib.es2017.d.ts"]=!0,g["lib.es2017.full.d.ts"]=!0,g["lib.es2017.intl.d.ts"]=!0,g["lib.es2017.object.d.ts"]=!0,g["lib.es2017.sharedmemory.d.ts"]=!0,g["lib.es2017.string.d.ts"]=!0,g["lib.es2017.typedarrays.d.ts"]=!0,g["lib.es2018.asyncgenerator.d.ts"]=!0,g["lib.es2018.asynciterable.d.ts"]=!0,g["lib.es2018.d.ts"]=!0,g["lib.es2018.full.d.ts"]=!0,g["lib.es2018.intl.d.ts"]=!0,g["lib.es2018.promise.d.ts"]=!0,g["lib.es2018.regexp.d.ts"]=!0,g["lib.es2019.array.d.ts"]=!0,g["lib.es2019.d.ts"]=!0,g["lib.es2019.full.d.ts"]=!0,g["lib.es2019.object.d.ts"]=!0,g["lib.es2019.string.d.ts"]=!0,g["lib.es2019.symbol.d.ts"]=!0,g["lib.es2020.bigint.d.ts"]=!0,g["lib.es2020.d.ts"]=!0,g["lib.es2020.full.d.ts"]=!0,g["lib.es2020.intl.d.ts"]=!0,g["lib.es2020.promise.d.ts"]=!0,g["lib.es2020.sharedmemory.d.ts"]=!0,g["lib.es2020.string.d.ts"]=!0,g["lib.es2020.symbol.wellknown.d.ts"]=!0,g["lib.es2021.d.ts"]=!0,g["lib.es2021.full.d.ts"]=!0,g["lib.es2021.promise.d.ts"]=!0,g["lib.es2021.string.d.ts"]=!0,g["lib.es2021.weakref.d.ts"]=!0,g["lib.es5.d.ts"]=!0,g["lib.es6.d.ts"]=!0,g["lib.esnext.d.ts"]=!0,g["lib.esnext.full.d.ts"]=!0,g["lib.esnext.intl.d.ts"]=!0,g["lib.esnext.promise.d.ts"]=!0,g["lib.esnext.string.d.ts"]=!0,g["lib.esnext.weakref.d.ts"]=!0,g["lib.scripthost.d.ts"]=!0,g["lib.webworker.d.ts"]=!0,g["lib.webworker.importscripts.d.ts"]=!0,g["lib.webworker.iterable.d.ts"]=!0;var _=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),L=function(){return L=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},L.apply(this,arguments)},w=function(t,r,e,n){function o(i){return i instanceof e?i:new e(function(a){a(i)})}return new(e||(e=Promise))(function(i,a){function c(u){try{s(n.next(u))}catch(d){a(d)}}function l(u){try{s(n.throw(u))}catch(d){a(d)}}function s(u){u.done?i(u.value):o(u.value).then(c,l)}s((n=n.apply(t,r||[])).next())})},S=function(t,r){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(u){return l([s,u])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,o=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){e=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){e.label=s[1];break}if(s[0]===6&&e.label<i[1]){e.label=i[1],i=s;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(s);break}i[2]&&e.ops.pop(),e.trys.pop();continue}s=r.call(t,e)}catch(u){s=[6,u],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},T;(function(t){t[t.None=0]="None",t[t.Block=1]="Block",t[t.Smart=2]="Smart"})(T||(T={}));function O(t,r,e){if(e===void 0&&(e=0),typeof t=="string")return t;if(t===void 0)return"";var n="";if(e){n+=r;for(var o=0;o<e;o++)n+="  "}if(n+=t.messageText,e++,t.next)for(var i=0,a=t.next;i<a.length;i++){var c=a[i];n+=O(c,r,e)}return n}function C(t){return t?t.map(function(r){return r.text}).join(""):""}var A=function(){function t(r){this._worker=r}return t.prototype._textSpanToRange=function(r,e){var n=r.getPositionAt(e.start),o=r.getPositionAt(e.start+e.length),i=n.lineNumber,a=n.column,c=o.lineNumber,l=o.column;return{startLineNumber:i,startColumn:a,endLineNumber:c,endColumn:l}},t}(),G=function(){function t(r){this._worker=r,this._libFiles={},this._hasFetchedLibFiles=!1,this._fetchLibFilesPromise=null}return t.prototype.isLibFile=function(r){return r&&r.path.indexOf("/lib.")===0?!!g[r.path.slice(1)]:!1},t.prototype.getOrCreateModel=function(r){var e=f.Sf.parse(r),n=f.j6.getModel(e);if(n)return n;if(this.isLibFile(e)&&this._hasFetchedLibFiles)return f.j6.createModel(this._libFiles[e.path.slice(1)],"typescript",e);var o=B.TG.getExtraLibs()[r];return o?f.j6.createModel(o.content,"typescript",e):null},t.prototype._containsLibFile=function(r){for(var e=0,n=r;e<n.length;e++){var o=n[e];if(this.isLibFile(o))return!0}return!1},t.prototype.fetchLibFilesIfNecessary=function(r){return w(this,void 0,void 0,function(){return S(this,function(e){switch(e.label){case 0:return this._containsLibFile(r)?[4,this._fetchLibFiles()]:[2];case 1:return e.sent(),[2]}})})},t.prototype._fetchLibFiles=function(){var r=this;return this._fetchLibFilesPromise||(this._fetchLibFilesPromise=this._worker().then(function(e){return e.getLibFiles()}).then(function(e){r._hasFetchedLibFiles=!0,r._libFiles=e})),this._fetchLibFilesPromise},t}(),M;(function(t){t[t.Warning=0]="Warning",t[t.Error=1]="Error",t[t.Suggestion=2]="Suggestion",t[t.Message=3]="Message"})(M||(M={}));var z=function(t){_(r,t);function r(e,n,o,i){var a=t.call(this,i)||this;a._libFiles=e,a._defaults=n,a._selector=o,a._disposables=[],a._listener=Object.create(null);var c=function(u){if(u.getLanguageId()===o){var d=function(){var m=a._defaults.getDiagnosticsOptions().onlyVisible;m?u.isAttachedToEditor()&&a._doValidate(u):a._doValidate(u)},p,h=u.onDidChangeContent(function(){clearTimeout(p),p=window.setTimeout(d,500)}),b=u.onDidChangeAttached(function(){var m=a._defaults.getDiagnosticsOptions().onlyVisible;m&&(u.isAttachedToEditor()?d():f.j6.setModelMarkers(u,a._selector,[]))});a._listener[u.uri.toString()]={dispose:function(){h.dispose(),b.dispose(),clearTimeout(p)}},d()}},l=function(u){f.j6.setModelMarkers(u,a._selector,[]);var d=u.uri.toString();a._listener[d]&&(a._listener[d].dispose(),delete a._listener[d])};a._disposables.push(f.j6.onDidCreateModel(function(u){return c(u)})),a._disposables.push(f.j6.onWillDisposeModel(l)),a._disposables.push(f.j6.onDidChangeModelLanguage(function(u){l(u.model),c(u.model)})),a._disposables.push({dispose:function(){for(var u=0,d=f.j6.getModels();u<d.length;u++){var p=d[u];l(p)}}});var s=function(){for(var u=0,d=f.j6.getModels();u<d.length;u++){var p=d[u];l(p),c(p)}};return a._disposables.push(a._defaults.onDidChange(s)),a._disposables.push(a._defaults.onDidExtraLibsChange(s)),f.j6.getModels().forEach(function(u){return c(u)}),a}return r.prototype.dispose=function(){this._disposables.forEach(function(e){return e&&e.dispose()}),this._disposables=[]},r.prototype._doValidate=function(e){return w(this,void 0,void 0,function(){var n,o,i,a,c,l,s,u,d,p=this;return S(this,function(h){switch(h.label){case 0:return[4,this._worker(e.uri)];case 1:return n=h.sent(),e.isDisposed()?[2]:(o=[],i=this._defaults.getDiagnosticsOptions(),a=i.noSyntaxValidation,c=i.noSemanticValidation,l=i.noSuggestionDiagnostics,a||o.push(n.getSyntacticDiagnostics(e.uri.toString())),c||o.push(n.getSemanticDiagnostics(e.uri.toString())),l||o.push(n.getSuggestionDiagnostics(e.uri.toString())),[4,Promise.all(o)]);case 2:return s=h.sent(),!s||e.isDisposed()?[2]:(u=s.reduce(function(b,m){return m.concat(b)},[]).filter(function(b){return(p._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(b.code)===-1}),d=u.map(function(b){return b.relatedInformation||[]}).reduce(function(b,m){return m.concat(b)},[]).map(function(b){return b.file?f.Sf.parse(b.file.fileName):null}),[4,this._libFiles.fetchLibFilesIfNecessary(d)]);case 3:return h.sent(),e.isDisposed()?[2]:(f.j6.setModelMarkers(e,this._selector,u.map(function(b){return p._convertDiagnostics(e,b)})),[2])}})})},r.prototype._convertDiagnostics=function(e,n){var o=n.start||0,i=n.length||1,a=e.getPositionAt(o),c=a.lineNumber,l=a.column,s=e.getPositionAt(o+i),u=s.lineNumber,d=s.column,p=[];return n.reportsUnnecessary&&p.push(f.eB.Unnecessary),n.reportsDeprecated&&p.push(f.eB.Deprecated),{severity:this._tsDiagnosticCategoryToMarkerSeverity(n.category),startLineNumber:c,startColumn:l,endLineNumber:u,endColumn:d,message:O(n.messageText,`
`),code:n.code.toString(),tags:p,relatedInformation:this._convertRelatedInformation(e,n.relatedInformation)}},r.prototype._convertRelatedInformation=function(e,n){var o=this;if(!n)return[];var i=[];return n.forEach(function(a){var c=e;if(a.file&&(c=o._libFiles.getOrCreateModel(a.file.fileName)),!!c){var l=a.start||0,s=a.length||1,u=c.getPositionAt(l),d=u.lineNumber,p=u.column,h=c.getPositionAt(l+s),b=h.lineNumber,m=h.column;i.push({resource:c.uri,startLineNumber:d,startColumn:p,endLineNumber:b,endColumn:m,message:O(a.messageText,`
`)})}}),i},r.prototype._tsDiagnosticCategoryToMarkerSeverity=function(e){switch(e){case M.Error:return f.ZL.Error;case M.Message:return f.ZL.Info;case M.Warning:return f.ZL.Warning;case M.Suggestion:return f.ZL.Hint}return f.ZL.Info},r}(A),J=function(t){_(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"triggerCharacters",{get:function(){return["."]},enumerable:!1,configurable:!0}),r.prototype.provideCompletionItems=function(e,n,o,i){return w(this,void 0,void 0,function(){var a,c,l,s,u,d,p;return S(this,function(h){switch(h.label){case 0:return a=e.getWordUntilPosition(n),c=new f.e6(n.lineNumber,a.startColumn,n.lineNumber,a.endColumn),l=e.uri,s=e.getOffsetAt(n),[4,this._worker(l)];case 1:return u=h.sent(),e.isDisposed()?[2]:[4,u.getCompletionsAtPosition(l.toString(),s)];case 2:return d=h.sent(),!d||e.isDisposed()?[2]:(p=d.entries.map(function(b){var m,y=c;if(b.replacementSpan){var x=e.getPositionAt(b.replacementSpan.start),D=e.getPositionAt(b.replacementSpan.start+b.replacementSpan.length);y=new f.e6(x.lineNumber,x.column,D.lineNumber,D.column)}var E=[];return((m=b.kindModifiers)===null||m===void 0?void 0:m.indexOf("deprecated"))!==-1&&E.push(f.Mj.CompletionItemTag.Deprecated),{uri:l,position:n,offset:s,range:y,label:b.name,insertText:b.name,sortText:b.sortText,kind:r.convertKind(b.kind),tags:E}}),[2,{suggestions:p}])}})})},r.prototype.resolveCompletionItem=function(e,n){return w(this,void 0,void 0,function(){var o,i,a,c,l,s;return S(this,function(u){switch(u.label){case 0:return o=e,i=o.uri,a=o.position,c=o.offset,[4,this._worker(i)];case 1:return l=u.sent(),[4,l.getCompletionEntryDetails(i.toString(),c,o.label)];case 2:return s=u.sent(),s?[2,{uri:i,position:a,label:s.name,kind:r.convertKind(s.kind),detail:C(s.displayParts),documentation:{value:r.createDocumentationString(s)}}]:[2,o]}})})},r.convertKind=function(e){switch(e){case v.primitiveType:case v.keyword:return f.Mj.CompletionItemKind.Keyword;case v.variable:case v.localVariable:return f.Mj.CompletionItemKind.Variable;case v.memberVariable:case v.memberGetAccessor:case v.memberSetAccessor:return f.Mj.CompletionItemKind.Field;case v.function:case v.memberFunction:case v.constructSignature:case v.callSignature:case v.indexSignature:return f.Mj.CompletionItemKind.Function;case v.enum:return f.Mj.CompletionItemKind.Enum;case v.module:return f.Mj.CompletionItemKind.Module;case v.class:return f.Mj.CompletionItemKind.Class;case v.interface:return f.Mj.CompletionItemKind.Interface;case v.warning:return f.Mj.CompletionItemKind.File}return f.Mj.CompletionItemKind.Property},r.createDocumentationString=function(e){var n=C(e.documentation);if(e.tags)for(var o=0,i=e.tags;o<i.length;o++){var a=i[o];n+=`

`+K(a)}return n},r}(A);function K(t){var r="*@"+t.name+"*";if(t.name==="param"&&t.text){var e=t.text,n=e[0],o=e.slice(1);r+="`"+n.text+"`",o.length>0&&(r+=" \u2014 "+o.map(function(i){return i.text}).join(" "))}else Array.isArray(t.text)?r+=" \u2014 "+t.text.map(function(i){return i.text}).join(" "):t.text&&(r+=" \u2014 "+t.text);return r}var U=function(t){_(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.signatureHelpTriggerCharacters=["(",","],e}return r._toSignatureHelpTriggerReason=function(e){switch(e.triggerKind){case f.Mj.SignatureHelpTriggerKind.TriggerCharacter:return e.triggerCharacter?e.isRetrigger?{kind:"retrigger",triggerCharacter:e.triggerCharacter}:{kind:"characterTyped",triggerCharacter:e.triggerCharacter}:{kind:"invoked"};case f.Mj.SignatureHelpTriggerKind.ContentChange:return e.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case f.Mj.SignatureHelpTriggerKind.Invoke:default:return{kind:"invoked"}}},r.prototype.provideSignatureHelp=function(e,n,o,i){return w(this,void 0,void 0,function(){var a,c,l,s,u;return S(this,function(d){switch(d.label){case 0:return a=e.uri,c=e.getOffsetAt(n),[4,this._worker(a)];case 1:return l=d.sent(),e.isDisposed()?[2]:[4,l.getSignatureHelpItems(a.toString(),c,{triggerReason:r._toSignatureHelpTriggerReason(i)})];case 2:return s=d.sent(),!s||e.isDisposed()?[2]:(u={activeSignature:s.selectedItemIndex,activeParameter:s.argumentIndex,signatures:[]},s.items.forEach(function(p){var h={label:"",parameters:[]};h.documentation={value:C(p.documentation)},h.label+=C(p.prefixDisplayParts),p.parameters.forEach(function(b,m,y){var x=C(b.displayParts),D={label:x,documentation:{value:C(b.documentation)}};h.label+=x,h.parameters.push(D),m<y.length-1&&(h.label+=C(p.separatorDisplayParts))}),h.label+=C(p.suffixDisplayParts),u.signatures.push(h)}),[2,{value:u,dispose:function(){}}])}})})},r}(A),Z=function(t){_(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideHover=function(e,n,o){return w(this,void 0,void 0,function(){var i,a,c,l,s,u,d;return S(this,function(p){switch(p.label){case 0:return i=e.uri,a=e.getOffsetAt(n),[4,this._worker(i)];case 1:return c=p.sent(),e.isDisposed()?[2]:[4,c.getQuickInfoAtPosition(i.toString(),a)];case 2:return l=p.sent(),!l||e.isDisposed()?[2]:(s=C(l.documentation),u=l.tags?l.tags.map(function(h){return K(h)}).join(`  

`):"",d=C(l.displayParts),[2,{range:this._textSpanToRange(e,l.textSpan),contents:[{value:"```typescript\n"+d+"\n```\n"},{value:s+(u?`

`+u:"")}]}])}})})},r}(A),Q=function(t){_(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideDocumentHighlights=function(e,n,o){return w(this,void 0,void 0,function(){var i,a,c,l,s=this;return S(this,function(u){switch(u.label){case 0:return i=e.uri,a=e.getOffsetAt(n),[4,this._worker(i)];case 1:return c=u.sent(),e.isDisposed()?[2]:[4,c.getOccurrencesAtPosition(i.toString(),a)];case 2:return l=u.sent(),!l||e.isDisposed()?[2]:[2,l.map(function(d){return{range:s._textSpanToRange(e,d.textSpan),kind:d.isWriteAccess?f.Mj.DocumentHighlightKind.Write:f.Mj.DocumentHighlightKind.Text}})]}})})},r}(A),X=function(t){_(r,t);function r(e,n){var o=t.call(this,n)||this;return o._libFiles=e,o}return r.prototype.provideDefinition=function(e,n,o){return w(this,void 0,void 0,function(){var i,a,c,l,s,u,d,p,h;return S(this,function(b){switch(b.label){case 0:return i=e.uri,a=e.getOffsetAt(n),[4,this._worker(i)];case 1:return c=b.sent(),e.isDisposed()?[2]:[4,c.getDefinitionAtPosition(i.toString(),a)];case 2:return l=b.sent(),!l||e.isDisposed()?[2]:[4,this._libFiles.fetchLibFilesIfNecessary(l.map(function(m){return f.Sf.parse(m.fileName)}))];case 3:if(b.sent(),e.isDisposed())return[2];for(s=[],u=0,d=l;u<d.length;u++)p=d[u],h=this._libFiles.getOrCreateModel(p.fileName),h&&s.push({uri:h.uri,range:this._textSpanToRange(h,p.textSpan)});return[2,s]}})})},r}(A),Y=function(t){_(r,t);function r(e,n){var o=t.call(this,n)||this;return o._libFiles=e,o}return r.prototype.provideReferences=function(e,n,o,i){return w(this,void 0,void 0,function(){var a,c,l,s,u,d,p,h,b;return S(this,function(m){switch(m.label){case 0:return a=e.uri,c=e.getOffsetAt(n),[4,this._worker(a)];case 1:return l=m.sent(),e.isDisposed()?[2]:[4,l.getReferencesAtPosition(a.toString(),c)];case 2:return s=m.sent(),!s||e.isDisposed()?[2]:[4,this._libFiles.fetchLibFilesIfNecessary(s.map(function(y){return f.Sf.parse(y.fileName)}))];case 3:if(m.sent(),e.isDisposed())return[2];for(u=[],d=0,p=s;d<p.length;d++)h=p[d],b=this._libFiles.getOrCreateModel(h.fileName),b&&u.push({uri:b.uri,range:this._textSpanToRange(b,h.textSpan)});return[2,u]}})})},r}(A),$=function(t){_(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideDocumentSymbols=function(e,n){return w(this,void 0,void 0,function(){var o,i,a,c,l,s=this;return S(this,function(u){switch(u.label){case 0:return o=e.uri,[4,this._worker(o)];case 1:return i=u.sent(),e.isDisposed()?[2]:[4,i.getNavigationBarItems(o.toString())];case 2:return a=u.sent(),!a||e.isDisposed()?[2]:(c=function(d,p,h){var b={name:p.text,detail:"",kind:k[p.kind]||f.Mj.SymbolKind.Variable,range:s._textSpanToRange(e,p.spans[0]),selectionRange:s._textSpanToRange(e,p.spans[0]),tags:[]};if(h&&(b.containerName=h),p.childItems&&p.childItems.length>0)for(var m=0,y=p.childItems;m<y.length;m++){var x=y[m];c(d,x,b.name)}d.push(b)},l=[],a.forEach(function(d){return c(l,d)}),[2,l])}})})},r}(A),v=function(){function t(){}return t.unknown="",t.keyword="keyword",t.script="script",t.module="module",t.class="class",t.interface="interface",t.type="type",t.enum="enum",t.variable="var",t.localVariable="local var",t.function="function",t.localFunction="local function",t.memberFunction="method",t.memberGetAccessor="getter",t.memberSetAccessor="setter",t.memberVariable="property",t.constructorImplementation="constructor",t.callSignature="call",t.indexSignature="index",t.constructSignature="construct",t.parameter="parameter",t.typeParameter="type parameter",t.primitiveType="primitive type",t.label="label",t.alias="alias",t.const="const",t.let="let",t.warning="warning",t}(),k=Object.create(null);k[v.module]=f.Mj.SymbolKind.Module,k[v.class]=f.Mj.SymbolKind.Class,k[v.enum]=f.Mj.SymbolKind.Enum,k[v.interface]=f.Mj.SymbolKind.Interface,k[v.memberFunction]=f.Mj.SymbolKind.Method,k[v.memberVariable]=f.Mj.SymbolKind.Property,k[v.memberGetAccessor]=f.Mj.SymbolKind.Property,k[v.memberSetAccessor]=f.Mj.SymbolKind.Property,k[v.variable]=f.Mj.SymbolKind.Variable,k[v.const]=f.Mj.SymbolKind.Variable,k[v.localVariable]=f.Mj.SymbolKind.Variable,k[v.variable]=f.Mj.SymbolKind.Variable,k[v.function]=f.Mj.SymbolKind.Function,k[v.localFunction]=f.Mj.SymbolKind.Function;var F=function(t){_(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r._convertOptions=function(e){return{ConvertTabsToSpaces:e.insertSpaces,TabSize:e.tabSize,IndentSize:e.tabSize,IndentStyle:T.Smart,NewLineCharacter:`
`,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}},r.prototype._convertTextChanges=function(e,n){return{text:n.newText,range:this._textSpanToRange(e,n.span)}},r}(A),q=function(t){_(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideDocumentRangeFormattingEdits=function(e,n,o,i){return w(this,void 0,void 0,function(){var a,c,l,s,u,d=this;return S(this,function(p){switch(p.label){case 0:return a=e.uri,c=e.getOffsetAt({lineNumber:n.startLineNumber,column:n.startColumn}),l=e.getOffsetAt({lineNumber:n.endLineNumber,column:n.endColumn}),[4,this._worker(a)];case 1:return s=p.sent(),e.isDisposed()?[2]:[4,s.getFormattingEditsForRange(a.toString(),c,l,F._convertOptions(o))];case 2:return u=p.sent(),!u||e.isDisposed()?[2]:[2,u.map(function(h){return d._convertTextChanges(e,h)})]}})})},r}(F),ee=function(t){_(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"autoFormatTriggerCharacters",{get:function(){return[";","}",`
`]},enumerable:!1,configurable:!0}),r.prototype.provideOnTypeFormattingEdits=function(e,n,o,i,a){return w(this,void 0,void 0,function(){var c,l,s,u,d=this;return S(this,function(p){switch(p.label){case 0:return c=e.uri,l=e.getOffsetAt(n),[4,this._worker(c)];case 1:return s=p.sent(),e.isDisposed()?[2]:[4,s.getFormattingEditsAfterKeystroke(c.toString(),l,o,F._convertOptions(i))];case 2:return u=p.sent(),!u||e.isDisposed()?[2]:[2,u.map(function(h){return d._convertTextChanges(e,h)})]}})})},r}(F),te=function(t){_(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideCodeActions=function(e,n,o,i){return w(this,void 0,void 0,function(){var a,c,l,s,u,d,p,h,b=this;return S(this,function(m){switch(m.label){case 0:return a=e.uri,c=e.getOffsetAt({lineNumber:n.startLineNumber,column:n.startColumn}),l=e.getOffsetAt({lineNumber:n.endLineNumber,column:n.endColumn}),s=F._convertOptions(e.getOptions()),u=o.markers.filter(function(y){return y.code}).map(function(y){return y.code}).map(Number),[4,this._worker(a)];case 1:return d=m.sent(),e.isDisposed()?[2]:[4,d.getCodeFixesAtPosition(a.toString(),c,l,u,s)];case 2:return p=m.sent(),!p||e.isDisposed()?[2,{actions:[],dispose:function(){}}]:(h=p.filter(function(y){return y.changes.filter(function(x){return x.isNewFile}).length===0}).map(function(y){return b._tsCodeFixActionToMonacoCodeAction(e,o,y)}),[2,{actions:h,dispose:function(){}}])}})})},r.prototype._tsCodeFixActionToMonacoCodeAction=function(e,n,o){for(var i=[],a=0,c=o.changes;a<c.length;a++)for(var l=c[a],s=0,u=l.textChanges;s<u.length;s++){var d=u[s];i.push({resource:e.uri,edit:{range:this._textSpanToRange(e,d.span),text:d.newText}})}var p={title:o.description,edit:{edits:i},diagnostics:n.markers,kind:"quickfix"};return p},r}(F),re=function(t){_(r,t);function r(e,n){var o=t.call(this,n)||this;return o._libFiles=e,o}return r.prototype.provideRenameEdits=function(e,n,o,i){return w(this,void 0,void 0,function(){var a,c,l,s,u,d,p,h,b,m,y;return S(this,function(x){switch(x.label){case 0:return a=e.uri,c=a.toString(),l=e.getOffsetAt(n),[4,this._worker(a)];case 1:return s=x.sent(),e.isDisposed()?[2]:[4,s.getRenameInfo(c,l,{allowRenameOfImportPath:!1})];case 2:if(u=x.sent(),u.canRename===!1)return[2,{edits:[],rejectReason:u.localizedErrorMessage}];if(u.fileToRename!==void 0)throw new Error("Renaming files is not supported.");return[4,s.findRenameLocations(c,l,!1,!1,!1)];case 3:if(d=x.sent(),!d||e.isDisposed())return[2];for(p=[],h=0,b=d;h<b.length;h++)if(m=b[h],y=this._libFiles.getOrCreateModel(m.fileName),y)p.push({resource:y.uri,edit:{range:this._textSpanToRange(y,m.textSpan),text:o}});else throw new Error("Unknown file "+m.fileName+".");return[2,{edits:p}]}})})},r}(A),ne=function(t){_(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.provideInlayHints=function(e,n,o){return w(this,void 0,void 0,function(){var i,a,c,l,s,u,d=this;return S(this,function(p){switch(p.label){case 0:return i=e.uri,a=i.toString(),c=e.getOffsetAt({lineNumber:n.startLineNumber,column:n.startColumn}),l=e.getOffsetAt({lineNumber:n.endLineNumber,column:n.endColumn}),[4,this._worker(i)];case 1:return s=p.sent(),e.isDisposed()?[2,[]]:[4,s.provideInlayHints(a,c,l)];case 2:return u=p.sent(),[2,u.map(function(h){return L(L({},h),{position:e.getPositionAt(h.position),kind:d._convertHintKind(h.kind)})})]}})})},r.prototype._convertHintKind=function(e){switch(e){case"Parameter":return f.Mj.InlayHintKind.Parameter;case"Type":return f.Mj.InlayHintKind.Type;default:return f.Mj.InlayHintKind.Other}},r}(A),N,P;function ie(t){P=R(t,"typescript")}function se(t){N=R(t,"javascript")}function oe(){return new Promise(function(t,r){if(!N)return r("JavaScript not registered!");t(N)})}function ae(){return new Promise(function(t,r){if(!P)return r("TypeScript not registered!");t(P)})}function R(t,r){var e=new V(r,t),n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return e.getLanguageServiceWorker.apply(e,i)},o=new G(n);return f.Mj.registerCompletionItemProvider(r,new J(n)),f.Mj.registerSignatureHelpProvider(r,new U(n)),f.Mj.registerHoverProvider(r,new Z(n)),f.Mj.registerDocumentHighlightProvider(r,new Q(n)),f.Mj.registerDefinitionProvider(r,new X(o,n)),f.Mj.registerReferenceProvider(r,new Y(o,n)),f.Mj.registerDocumentSymbolProvider(r,new $(n)),f.Mj.registerDocumentRangeFormattingEditProvider(r,new q(n)),f.Mj.registerOnTypeFormattingEditProvider(r,new ee(n)),f.Mj.registerCodeActionProvider(r,new te(n)),f.Mj.registerRenameProvider(r,new re(o,n)),f.Mj.registerInlayHintsProvider(r,new ne(n)),new z(o,t,r,n),n}}}]);
